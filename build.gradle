

task compileHaskell(type: Exec) {
  doFirst {
    file('build/executables').mkdirs()
    file('build/tmp').mkdirs()
  }

  commandLine 'ghc', '-o', "$project.buildDir/executables/$project.name", '-O2', '-Wall', '-package', 'ghc', '-outputdir', "$project.buildDir/tmp", '-rtsopts', 'src/main/haskell/Main.hs'

  inputs.dir file('src/main/haskell')
}

task clean(type: Delete) {
  delete 'build'
}

task build {
  dependsOn compileHaskell
}